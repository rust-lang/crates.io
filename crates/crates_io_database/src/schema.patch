--- original
+++ patched
@@ -14,9 +14,7 @@
     /// The `pg_catalog.tsvector` SQL type
     ///
     /// (Automatically generated by Diesel.)
-    #[derive(diesel::sql_types::SqlType)]
-    #[diesel(postgres_type(name = "tsvector", schema = "pg_catalog"))]
-    pub struct Tsvector;
+    pub use diesel_full_text_search::Tsvector;
 }

 diesel::table! {
@@ -25,7 +23,7 @@
     /// (Automatically generated by Diesel.)
     api_tokens (id) {
         /// NULL or an array of crate scope patterns (see RFC #2947)
-        crate_scopes -> Nullable<Array<Nullable<Text>>>,
+        crate_scopes -> Nullable<Array<Text>>,
         /// The `created_at` column of the `api_tokens` table.
         ///
         /// Its SQL type is `Timestamptz`.
@@ -33,7 +31,7 @@
         /// (Automatically generated by Diesel.)
         created_at -> Timestamptz,
         /// An array of endpoint scopes or NULL for the `legacy` endpoint scope (see RFC #2947)
-        endpoint_scopes -> Nullable<Array<Nullable<Text>>>,
+        endpoint_scopes -> Nullable<Array<Text>>,
         /// The `expired_at` column of the `api_tokens` table.
         ///
         /// Its SQL type is `Nullable<Timestamptz>`.
@@ -169,12 +167,6 @@
         ///
         /// (Automatically generated by Diesel.)
         id -> Int4,
-        /// The `path` column of the `categories` table.
-        ///
-        /// Its SQL type is `Ltree`.
-        ///
-        /// (Automatically generated by Diesel.)
-        path -> Ltree,
         /// The `slug` column of the `categories` table.
         ///
         /// Its SQL type is `Varchar`.
@@ -477,7 +469,7 @@
         /// Its SQL type is `Array<Nullable<Text>>`.
         ///
         /// (Automatically generated by Diesel.)
-        features -> Array<Nullable<Text>>,
+        features -> Array<Text>,
         /// The `id` column of the `dependencies` table.
         ///
         /// Its SQL type is `Int4`.
@@ -722,6 +714,24 @@
 }

 diesel::table! {
+    /// Representation of the `recent_crate_downloads` view.
+    ///
+    /// This data represents the downloads in the last 90 days.
+    /// This view does not contain realtime data.
+    /// It is refreshed by the `update-downloads` script.
+    recent_crate_downloads (crate_id) {
+        /// The `crate_id` column of the `recent_crate_downloads` view.
+        ///
+        /// Its SQL type is `Integer`.
+        crate_id -> Integer,
+        /// The `downloads` column of the `recent_crate_downloads` table.
+        ///
+        /// Its SQL type is `BigInt`.
+        downloads -> BigInt,
+    }
+}
+
+diesel::table! {
     /// Representation of the `reserved_crate_names` table.
     ///
     /// (Automatically generated by Diesel.)
@@ -1130,7 +1140,8 @@
 diesel::joinable!(crate_downloads -> crates (crate_id));
 diesel::joinable!(crate_owner_invitations -> crates (crate_id));
 diesel::joinable!(crate_owners -> crates (crate_id));
-diesel::joinable!(crate_owners -> users (created_by));
+diesel::joinable!(crate_owners -> teams (owner_id));
+diesel::joinable!(crate_owners -> users (owner_id));
 diesel::joinable!(crates_categories -> categories (category_id));
 diesel::joinable!(crates_categories -> crates (crate_id));
 diesel::joinable!(crates_keywords -> crates (crate_id));
@@ -1146,6 +1157,7 @@
 diesel::joinable!(publish_limit_buckets -> users (user_id));
 diesel::joinable!(publish_rate_overrides -> users (user_id));
 diesel::joinable!(readme_renderings -> versions (version_id));
+diesel::joinable!(recent_crate_downloads -> crates (crate_id));
 diesel::joinable!(trustpub_configs_github -> crates (crate_id));
 diesel::joinable!(trustpub_configs_gitlab -> crates (crate_id));
 diesel::joinable!(version_downloads -> versions (version_id));
@@ -1178,6 +1190,7 @@
     publish_limit_buckets,
     publish_rate_overrides,
     readme_renderings,
+    recent_crate_downloads,
     reserved_crate_names,
     teams,
     trustpub_configs_github,
